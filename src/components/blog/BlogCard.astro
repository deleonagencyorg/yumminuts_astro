---
import LazyImage from '../common/LazyImage.astro';
import { getLocale } from '../../i18n/i18n';
import { Image } from 'astro:assets';
import { fade } from 'astro:transitions';

interface Props {
  image: string;
  title: string;
  id: string;
  slug: string;
  textColor?: string;
  iconColor?: string;
  hoverImage?: string;
  currentLang?: string;
  summary?: string;
  minutes?: number;
  isNew?: boolean;
}

const { 
  image, 
  title, 
  id,
  slug,
  textColor = 'text-blue-900',
  iconColor = 'text-blue-900',
  hoverImage = image,
  currentLang = getLocale(),
  summary,
  minutes,
  isNew = false
} = Astro.props;

const blogLink = `/${currentLang}/blog/${slug || id}`;
const viewBlogText = currentLang === 'es' ? 'Leer más' : 'Read more';
---

<a 
  href={blogLink} 
  class="block group relative transition-all duration-300 ease-in-out w-full"
  transition:animate="fade"
>
  <div class="flex flex-col relative w-full">
    <div class="relative overflow-hidden w-full aspect-[4/3] rounded-xl">
      <LazyImage
        src={image}
        alt={title}
        class="w-full h-full object-cover"
        transition:name={`blog-image-${id}`}
      />
    </div>

    <div class="pt-2 md:pt-3">
      <h3 class="font-sans font-bold text-black text-sm md:text-xl leading-snug mt-2 break-words overflow-hidden line-clamp-2">{title}</h3>
      {summary && (
        <p class="mt-2 text-gray-700 text-sm md:text-base leading-snug line-clamp-2">{summary}</p>
      )}
      {(isNew || minutes) && (
        <div class="mt-2 flex items-center gap-3 text-sm">
          {isNew && (
            <span class="text-red-600 font-semibold">{currentLang === 'es' ? 'Nuevo' : 'New'}</span>
          )}
          {isNew && minutes ? <span>•</span> : null}
          {minutes && (
            <span class="text-gray-500">{currentLang === 'es' ? `${minutes} minutos de lectura` : `${minutes} min read`}</span>
          )}
        </div>
      )}
    </div>
  </div>
</a>

<style>
  /* Estructura alineada con RecipeCard: imagen 4/3 + título clamp 2 líneas */
</style>
