---
import LazyImage from '../../components/common/LazyImage.astro';
// Component Imports
import Carousel from '../../components/common/Carousel/index.astro';
import RecipesCarousel from "../../components/recipes/RecipesCarousel.astro";
import ProductsCarousel from '../../components/common/ProductsCarousel/index.astro';
import MasonryGallery from '../../components/gallery/MasonryGallery.astro';
import PixelGrid from '../../components/atoms/PixelGrid.astro';
import AnimHeart from '../../components/common/AnimHeart/index.astro';
import SocialMediaIcons from '../../components/common/SocialMediaIcons/index.astro';
import Newsletter from '../../components/common/Newsletter/index.astro';
import HealthInfoSection from '../../components/common/HealthInfoSection.astro';
import Categories from '../../components/common/Categories/index.astro';
import Discover from '../../components/common/Discover/index.astro';

// Style Imports
import './styles.css';

// i18n and Data Imports
import { t, getLocale } from '../../i18n/i18n';
import { InstagramEmbed } from 'react-social-media-embed';



// Props
export interface Props {
  loading?: boolean;
}
const { loading = false } = Astro.props;

// Language and Data Setup
const currentLang = getLocale();
const homeAssets = t('home', { namespace: 'common', locale: currentLang }) || {};
const recipesAssets = t('', { namespace: 'recipes', locale: currentLang }) || {};
const galleryAssets = t('', { namespace: 'gallery', locale: currentLang }) || {};
const aboutAssets = t('', { namespace: 'aboutus', locale: currentLang }) || {};
const brandsAssets = t('', { namespace: 'brands', locale: currentLang }) || {};
const newsAssets =  t('', { namespace: 'news', locale: currentLang }) || {};
const products = t('items', { namespace: 'products', locale: currentLang }) || [];
const brandsList = brandsAssets.brands || [];
const nutsBrand = brandsList.find((brand: any) => brand.id === 'yumminuts');
const nutsCategories = nutsBrand?.categories || [];

const commonAssets = t('assets.slider', { namespace: 'common', locale: currentLang }) || [];
const slides = Array.isArray(commonAssets) 
  ? commonAssets
    .filter(asset => asset && typeof asset === 'object' && asset.desktop && asset.mobile)
    .map(asset => ({
      desktop: asset.desktop,
      mobile: asset.mobile,
      alt: asset.alt || "Ziba's",
      title: asset.title || '',
      subtitle: asset.description || '',
      link: asset.url || asset.link || ''
    }))
  : [];

const discoverAssets = t('discover', { namespace: 'common', locale: currentLang }) || {};

---

  <main class="w-full flex flex-col items-center justify-center mt-0">
    <!-- Slider Section con máscara -->
    <div class="relative w-full overflow-hidden max-w-[100vw] h-auto aspect-[1/1] md:aspect-[21/9] lg:h-[66vh]">
     

      <div class="relative z-0 w-full md:w-[100%] md:ml-auto md:h-full h-[72vh] md:flex md:items-center md:justify-center">
        <Carousel slides={slides} />
      </div>
    </div>
    
    <!-- Sección de Información -->
    <HealthInfoSection />

    <!-- Sección de Productos Nuts -->
    {nutsCategories.length > 0 && (
      <section class="w-full py-4 bg-white pt-16">
        <div class="container mx-auto px-4">
          <Categories 
            products={nutsCategories}
            title="Categorías"
          />
        </div>
      </section>
    )}

    <!-- Sección de video -->
    <section id="video" class="w-full h-[30rem] bg-pink">

    </section>

    <!-- Sección de Recetas -->
    <section id="recipes" class="w-full py-12" transition:animate="slide">
      <div class="container mx-auto px-4 bg-white">
        {recipesAssets.home?.title && (
          <div class="text-left mb-16 relative z-20" >
            <h2 class="text-3xl md:text-4xl text-sans font-bold mb-4" style={`color: black`}>
              {recipesAssets.home?.title}
            </h2>
            
          </div>
        )}
        <RecipesCarousel 
          recipes={recipesAssets.items || []} 
          title={recipesAssets.home?.title || 'Recetas'}
          textButton={recipesAssets.home?.view_more || 'Ver Todas'}
        />
      </div>
    </section>

    <!-- Sección Descubrenos -->
    <section id="discover" class="w-full bg-white py-16">
      <Discover title={discoverAssets.title} images={discoverAssets.images || []} />
    </section>

    <!-- Sección Gallery 
    <section id="gallery" class="bg-pink w-full py-12" transition:animate="slide">
      <div class="container mx-auto px-4">
        {Array.isArray(galleryAssets.images) && galleryAssets.images.length > 0 && (
          <MasonryGallery 
            items={galleryAssets.images}
            columns={3}
            title={galleryAssets.title}
            className=""
          />
        )}
      </div>
    </section>
    -->



    <!-- Sección News -->
     <!-- <section id="news" class="bg-yellow w-full py-12" transition:animate="slide">
  <div class="container mx-auto px-4">
    {newsAssets.home.title && (
      <div class="text-center mb-16 relative z-20 overflow-hidden" >
          <div class="absolute left-0 top-0 w-[100%] h-[100%] -z-10 pointer-events-none -ml-[250px]">
            <PixelGrid
               pixelSize={20}
               density={0.7}
               introDuration={800}
               loopInterval={1100}
               mutateAmount={50}
             />
          </div>
        <h2 class="text-3xl md:text-4xl italic font-bold mb-4 text-brown relative z-10">
          {newsAssets.home.title}
        </h2>
        {newsAssets.home.subtitle && (
          <h1 class="text-6xl md:text-9xl italic font-bold mb-4 text-brown relative z-10 flex items-center justify-center">
            
            <span class="font-title pl-2 relative z-10">{newsAssets.home.subtitle}</span>
          </h1>
        
        )}
      </div>
    )}
  </div>
</section> -->
    <!-- Sección Abaout -->
<!-- <section id="about" class="bg-red w-full py-12" transition:animate="slide">
  <div class="container mx-auto px-4">
    <div class="text-center mb-8">
      {aboutAssets.title && (
        <div class="text-center mb-16 relative z-20" >
          <h2 class="text-3xl md:text-4xl italic font-bold mb-4 text-white">
            {aboutAssets.title}
          </h2>
          {aboutAssets.subtitle && (
            <h1 class="text-6xl md:text-9xl italic font-bold mb-4 text-white">
              {aboutAssets.subtitle}
            </h1>
          )}
        </div>
      )}
    </div>
    <div class="flex flex-col md:flex-row items-center justify-center gap-8">
      <div>
        <h4 class="md:text-4xl text-lg font-bold text-white font-title">LOREM IPSUM DOLOR</h4>
        <p class="text-white font-sans  text-xl leading-relaxed w-100%">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam nec metus vel ante bibendum finibus. Nullam nec metus vel ante bibendum finibus.</p>
      </div>
      <div>
        <LazyImage src="https://snack.yummiespromociones.com/zibas/gallery16.webp" class="py-4" alt="Ziba's" />
      </div>
      <div>
        <LazyImage src="https://snack.yummiespromociones.com/zibas/gallery15.webp" class="py-4" alt="Ziba's" />
        <h4 class="md:text-4xl text-lg font-bold text-white font-title">LOREM IPSUM DOLOR</h4>
        <p class="text-white font-sans text-xl  leading-relaxed w-100%">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam nec metus vel ante bibendum finibus. Nullam nec metus vel ante bibendum finibus.</p>
      </div>
    </div>
  </div>
</section> -->





  </main>
